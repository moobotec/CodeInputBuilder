!function(t){t.fn.codeInputBuilder=function(e){const n=t.extend({type:"integer",numInputs:1,minValues:[],maxValues:[],values:[],defaultValue:0,allowSign:!1,defaultSign:"+",decimalPosition:1,separator:".",totalMax:null,totalMin:null,allowScroll:!0,scrollSensitivity:50,requireKeyForScroll:null,gap:"10px",onValueChange:null},e);t.fn.codeInputBuilder.version="0.0.3",t.fn.codeInputBuilder.title="Code Input Builder",t.fn.codeInputBuilder.description="Un plugin jQuery pour créer des champs d'input configurables pour des valeurs numériques ou flottantes et pour les textes.";let a=-1,i=0,l=9,o=n.allowSign?n.defaultSign:null,s=new Array(n.numInputs),r="",u=void 0!==n.totalMin&&null!=n.totalMin?m(n.totalMin):null,p=void 0!==n.totalMax&&null!=n.totalMax?m(n.totalMax):null,c=n.type+"_"+"xxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}));function d(t,e){return t.indexOf(e)}function f(e,n){let a="+";return t("#"+e+"_"+n+"_input").length&&(a=t("#"+e+"_"+n+"_input").val()),`${a}`}function v(e,a,i,l,o=!0){let s;if("integer"===n.type){let e=function(e,n){let a="";return t("input[id^="+e+"_"+n+"_input]").each((function(){a+=t(this).val()})),`${a}`}("digit",l);if(s=parseInt(e,10),n.allowSign){s*="+"==f("sign",l)?1:-1}}else if("float"===n.type){let e=function(e,a){let i="",l=0;return t("input[id^="+e+"_"+a+"_input]").each((function(){l===n.decimalPosition&&(i+="."),i+=t(this).val(),l++})),`${i}`}("digit",l);if(s=parseFloat(e,10),n.allowSign){s*="+"==f("sign",l)?1:-1}}else"text"===n.type&&(s=a);r=s,"integer"!==n.type&&"float"!==n.type||(void 0!==n.totalMin&&null!=n.totalMin&&r<=n.totalMin&&(r=n.totalMin),void 0!==n.totalMax&&null!=n.totalMax&&r>=n.totalMax&&(r=n.totalMax),s!=r&&("float"===n.type?V(r):"integer"===n.type&&S(r))),1==o&&"function"==typeof n.onValueChange&&n.onValueChange(e,r)}function h(e,n,a,i,l,o){t(".cla-input-wrapper .top-text-"+e+"-"+n).css("visibility","hidden"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("visibility","hidden"),t(".cla-input-wrapper .top-text-"+e+"-"+n).css("opacity","0"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("opacity","0"),a&&(t(".cla-input-wrapper .top-text-"+e+"-"+n).css("visibility","visible"),t(".cla-input-wrapper .top-text-"+e+"-"+n).html(l),t(".cla-input-wrapper .top-text-"+e+"-"+n).css("opacity","1")),i&&(t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("visibility","visible"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).html(o),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("opacity","1"))}function m(t){const e=t.toString().replace(".","");let a=Array.from(e,(t=>parseInt(t,10)));for(;a.length<n.numInputs;)a.push(0);return a.slice(0,n.numInputs)}function x(t,e=!1,n=0){let a=t.map((t=>t.toString())).join("");return 1==e&&n<t.length&&(a=a.slice(0,n)+"."+a.slice(n)),parseFloat(a)}function _(e,i,l,o){let r=t(e).attr("id").replace(l+"_"+o+"_input_","");s[r-1]=i,e.value=i,v(t(e),i,0,o);let c=x(s,"float"===n.type,n.decimalPosition),d=parseInt(i)-1;void 0!==n.totalMax&&null!=n.totalMax&&c>=n.totalMax&&(d=parseInt(p[r-1])-1);let f=parseInt(i)+1;void 0!==n.totalMin&&null!=n.totalMin&&c<=n.totalMin&&(f=parseInt(u[r-1])+1);let m=parseInt(t(e).attr("data-min")),_=parseInt(t(e).attr("data-max"));if(void 0!==n.totalMin&&null!=n.totalMin&&c<=n.totalMin&&(m=Math.max(m,u[r-1])),void 0!==n.totalMax&&null!=n.totalMax&&c>=n.totalMax&&(_=Math.min(_,p[r-1])),r==a){h(o,r,d>=m,f<_+1,d,f)}}function g(e,n,a,i,l,o,s){const r=a.ctrlKey&&"paste"===a.key;let u=parseInt(t(e).attr("data-min")),p=parseInt(t(e).attr("data-max"));if(a.ctrlKey&&("c"===a.key||67===n)||a.ctrlKey&&("v"===a.key||86===n)||!a.ctrlKey&&17===n)a.preventDefault();else if(n>=48&&n<=48+p||n>=96&&n<=96+p&&!r||8===n||9===n||46===n){if(8===n)_(e,u,i,l),o-2==0&&(o=s+2),t("#"+i+"_"+l+"_input_"+(o-2)).focus();else if(46===n)_(e,u,i,l),o+1==s+2&&(o=1),t("#"+i+"_"+l+"_input_"+o).focus();else if(9!=n){var c=e.value.slice(-1);if(/^[0-9]$/.test(c)){let s=a.key;r&&(s=function(t){return String.fromCharCode(t)}(n)),_(e,s,i,l),t("#"+i+"_"+l+"_input_"+o).focus()}else _(e,e.value.slice(0,-1),i,l)}}else _(e,u,i,l),a.preventDefault()}function M(e,n,a,i){o=n,e.value=n,v(t(e),n,0,i),h(i,a,"-"==n,"+"==n,"+","-")}function y(t,e,n,a,i,l){const o=e.originalEvent||e;var s=o.keyCode||o.which;16!=s&&g(t,s,o,n,a,i,l)}function $(t,e,n,a){const i=e.originalEvent||e;var l=i.keyCode||i.which;16!=l&&function(t,e,n,a,i){"+"===n.key||"-"===n.key?M(t,n.key,a,i):9!=e&&(M(t,"+",a,i),n.preventDefault())}(t,l,i,n,a)}function I(e,a,i,l){if(!n.allowScroll)return;const o=e.originalEvent||e;if(o.preventDefault(),n.requireKeyForScroll){const t=n.requireKeyForScroll.toLowerCase();if("control"===t&&!e.ctrlKey||"shift"===t&&!e.shiftKey||"alt"===t&&!e.altKey||"meta"===t&&!e.metaKey)return}const s=void 0!==o.deltaY?o.deltaY:o.wheelDelta?-o.wheelDelta:0;if(!(Math.abs(s)<n.scrollSensitivity))if("digit"==i){let e=parseInt(a.value,10);e+=s<0?-1:1;let n=parseInt(t(a).attr("data-min")),o=parseInt(t(a).attr("data-max"));e<n&&(e=n),e>o&&(e=o),_(a,e,i,l)}else if("sign"==i){let t=0;"-"==a.value&&(t=0),"+"==a.value&&(t=1),t+=s<0?-1:1,t<0&&M(a,"+",i,l),t>1&&M(a,"-",i,l)}else if("list"==i){let e=d(n.values,a.value);if(-1!=e){e+=s<0?-1:1;let n=parseInt(t(a).attr("data-min")),i=parseInt(t(a).attr("data-max"));e<n&&(e=n),e>i&&(e=i)}!function(e,a,i,l){e.value=n.values[a],v(t(e),n.values[a],0,l);let o=parseInt(a)-1,s=parseInt(a)+1,r=parseInt(t(e).attr("data-min")),u=parseInt(t(e).attr("data-max")),p=o>=r,c=s<u+1;o<r&&(o=r),o>u&&(s=u),h(l,i,p,c,n.values[o],n.values[s])}(a,e,i,l)}}function w(e,i,l){if("digit"==i){let o=parseInt(t(e).val())-1,s=parseInt(t(e).val())+1,r=t(e).attr("id").replace(i+"_"+l+"_input_",""),u=parseInt(t(e).attr("data-min")),c=parseInt(t(e).attr("data-max"));void 0!==n.totalMax&&null!=n.totalMax&&(c=Math.min(c,p[r-1])),a=r,h(l,r,o>=u,s<c+1,o,s)}else if("sign"==i){let n="-"==t(e).val(),o="+"==t(e).val();a=i,h(l,i,n,o,"+","-")}else if("list"==i){let o=d(n.values,e.value);if(-1!=o){a=i;let s=parseInt(o)-1,r=parseInt(o)+1,u=parseInt(t(e).attr("data-min")),p=parseInt(t(e).attr("data-max")),c=s>=u,d=r<p+1;s<u&&(s=u),s>p&&(r=p),h(l,i,c,d,n.values[s],n.values[r])}}}function b(e,n,i){if("digit"==n){h(i,t(e).attr("id").replace(n+"_"+i+"_input_",""),!1,!1,0,0)}else"sign"!=n&&"list"!=n||h(i,n,!1,!1,0,0);a=0}function V(e){if(isNaN(e))return;let a=e;void 0!==n.totalMin&&null!=n.totalMin&&a<=n.totalMin&&(a=n.totalMin),void 0!==n.totalMax&&null!=n.totalMax&&a>=n.totalMax&&(a=n.totalMax),n.allowSign&&t(`[id^="sign_${c}_input"]`).val(a<0?"-":"+");let o=Math.abs(a),[r,u]=o.toString().split(".");const p=n.decimalPosition;r.length>p&&(r=r.slice(1)),r=r.padStart(n.decimalPosition,"0");const d=n.numInputs-n.decimalPosition;u=(u||"").slice(0,d).padEnd(d,"0");const f=t(`[id^="digit_${c}_input_"]`).get();let v=f.length-1;for(let e=0;e<f.length;e++)t(f[e]).val(0);for(let e of(r+(u||"")).split("").reverse()){const a=void 0!==n.minValues[v]?Math.max(i,Math.min(n.minValues[v],l)):i,o=void 0!==n.maxValues[v]?Math.max(i,Math.min(n.maxValues[v],l)):l;let r=Math.max(a,Math.min(e,o));t(f[v]).val(r),s[v]=r,v--}}function S(e){if(isNaN(e))return;let a=e;void 0!==n.totalMin&&null!=n.totalMin&&a<=n.totalMin&&(a=n.totalMin),void 0!==n.totalMax&&null!=n.totalMax&&a>=n.totalMax&&(a=n.totalMax),n.allowSign&&t(`[id^="sign_${c}_input"]`).val(a<0?"-":"+");let o=Math.abs(a);const r=t(`[id^="digit_${c}_input_"]`).get();let u=r.length-1;for(let e=0;e<r.length;e++)t(r[e]).val(0);for(let e of o.toString().split("").reverse()){const a=void 0!==n.minValues[u]?Math.max(i,Math.min(n.minValues[u],l)):i,o=void 0!==n.maxValues[u]?Math.max(i,Math.min(n.maxValues[u],l)):l;let p=Math.max(a,Math.min(e,o));t(r[u]).val(p),s[u]=p,u--}}function k(e,n,a,i){let l,o,s=t(e).attr("id").replace(n+"_"+a+"_div_","");"digit"==n?s.includes("top")?(l=s.replace("top_",""),o=`.cla-input-wrapper .top-text-${a}-${l}`):(l=s.replace("bottom_",""),o=`.cla-input-wrapper .bottom-text-${a}-${l}`):"sign"!=n&&"list"!=n||(o=`.cla-input-wrapper .${s}-text-${a}-${n}`),t(o).css("visibility",i?"visible":"hidden"),t(o).css("opacity",i?"1":"0")}function C(e,i,l){let o,s,r,u,p,c,f,m,x=t(e).attr("id").replace(i+"_"+l+"_div_","");if("digit"==i)x.includes("top")?(o=x.replace("top_",""),s=parseInt(t(e).html()),t("#"+i+"_"+l+"_input_"+o).val(s),v(t("#"+i+"_"+l+"_input_"+o),s,0,l),a=o,r=parseInt(t("#"+i+"_"+l+"_input_"+o).attr("data-min")),f=s-1,p=f>=r,h(l,o,p,!1,f,0),a=0):(o=x.replace("bottom_",""),s=parseInt(t(e).html()),t("#"+i+"_"+l+"_input_"+o).val(s),v(t("#"+i+"_"+l+"_input_"+o),s,0,l),a=o,u=parseInt(t("#"+i+"_"+l+"_input_"+o).attr("data-max")),m=s+1,c=m<u+1,h(l,o,!1,c,0,m),a=0);else if("sign"==i)t("#"+i+"_"+l+"_input").val(t(e).html()),v(t("#"+i+"_"+l+"_input"),t(e).html(),0,l),a=i,h(l,i,!1,!1,0,0),a=0;else if("list"==i){t("#"+i+"_"+l+"_input").val(t(e).html()),v(t("#"+i+"_"+l+"_input"),t(e).html(),0,l),a=i;let o=d(n.values,t(e).html());x.includes("top")?(r=parseInt(t("#"+i+"_"+l+"_input").attr("data-min")),f=o-1,p=f>=r,f<r&&(f=r),h(l,i,p,!1,n.values[f],"...")):(u=parseInt(t("#"+i+"_"+l+"_input").attr("data-max")),m=o+1,c=m<u+1,f>m&&(m=u),h(l,i,!1,c,"...",n.values[m])),a=0}}function D(e,a,i,l,o){const s=a.originalEvent||a;s.preventDefault();let r=s.clipboardData.getData("text");r.length>1&&(r=r.substring(0,1));let u=r.charCodeAt(0);s.ctrlKey=!0,s.key="paste",g(e,u,s,l,i,t(e).attr("id").replace(o+"_",""),n.numInputs)}return this.each((function(){const e=t(this),a=t("<div>",{class:"cla-input-container",css:{display:"flex","justify-content":"center","align-items":"center",gap:n.gap}});if("integer"===n.type||"float"===n.type){if(n.allowSign){const e="sign",n=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),i=t("<div>",{class:`cla-hover-text top-text-${c}-${e}`,id:`${e}_${c}_div_top`,text:"0"});i.hover((function(){k(this,e,c,!0)}),(function(){k(this,e,c,!1)})),i.on("click",(function(t){C(this,e,c)})),n.append(i);const l=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${e}-input`,maxLength:"1",id:`${e}_${c}_input`,name:`${e}${e}`,autocomplete:"off",value:o});l.on("keyup",(function(t){$(t.currentTarget,t,e,c)})),l.on("wheel",(function(t){I(t,t.currentTarget,e,c)})),l.hover((function(){w(this,e,c)}),(function(){b(this,e,c)})),l.on("paste",(function(t){D(this,t,c,e,`${e}_${c}_input`)})),l.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),n.append(l);const s=t("<div>",{class:`cla-hover-text bottom-text-${c}-${e}`,id:`${e}_${c}_div_bottom`,text:"0"});s.hover((function(){k(this,e,c,!0)}),(function(){k(this,e,c,!1)})),s.on("click",(function(t){C(this,e,c)})),n.append(s),a.append(n)}for(let e=1;e<=n.numInputs;e++){if("float"===n.type&&e-1===n.decimalPosition){const e=t("<div>",{class:"col-1",html:'<div><h2 class="my-5">'+n.separator+"</h2></div>"});a.append(e)}const o="digit",r=void 0!==n.minValues[e-1]?Math.max(i,Math.min(n.minValues[e-1],l)):i,u=void 0!==n.maxValues[e-1]?Math.max(i,Math.min(n.maxValues[e-1],l)):l;let p=void 0!==n.values[e-1]?n.values[e-1]:n.defaultValue;p=Math.max(r,Math.min(p,u)),s[e-1]=p;const d=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),f=t("<div>",{class:`cla-hover-text top-text-${c}-${e}`,id:`${o}_${c}_div_top_${e}`,text:r});f.hover((function(){k(this,o,c,!0)}),(function(){k(this,o,c,!1)})),f.on("click",(function(t){C(this,o,c)})),d.append(f);const v=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${o}-input`,maxLength:"1",id:`${o}_${c}_input_${e}`,name:`${o}${e}`,autocomplete:"off",value:p,"data-min":r,"data-max":u});v.on("keyup",(function(t){y(t.currentTarget,t,o,c,e+1,n.numInputs)})),v.on("wheel",(function(t){I(t,t.currentTarget,o,c)})),v.hover((function(){w(this,o,c)}),(function(){b(this,o,c)})),v.on("paste",(function(t){D(this,t,c,o,`${o}_${c}_input`)})),v.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),d.append(v);const h=t("<div>",{class:`cla-hover-text bottom-text-${c}-${e}`,id:`${o}_${c}_div_bottom_${e}`,text:r});h.hover((function(){k(this,o,c,!0)}),(function(){k(this,o,c,!1)})),h.on("click",(function(t){C(this,o,c)})),d.append(h),a.append(d)}e.append(a);for(let e=1;e<=n.numInputs;e++){const a="digit",o=void 0!==n.minValues[e-1]?Math.max(i,Math.min(n.minValues[e-1],l)):i,s=void 0!==n.maxValues[e-1]?Math.max(i,Math.min(n.maxValues[e-1],l)):l;let r=void 0!==n.values[e-1]?n.values[e-1]:n.defaultValue;r=Math.max(o,Math.min(r,s)),v(t("#"+a+"_"+c+"_input_"+e),r,0,c,!1)}}else if("text"===n.type){const i="list",l=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),o=t("<div>",{class:`cla-hover-text top-text-${c}-${i}`,id:`${i}_${c}_div_top`,text:"..."});o.hover((function(){k(this,i,c,!0)}),(function(){k(this,i,c,!1)})),o.on("click",(function(t){C(this,i,c)})),l.append(o);const s=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${i}-input`,id:`${i}_${c}_input`,name:`${i}`,autocomplete:"off",value:n.values[n.defaultValue],disabled:"disabled","data-min":0,"data-max":n.values.length-1});s.on("wheel",(function(t){I(t,t.currentTarget,i,c)})),s.hover((function(){w(this,i,c)}),(function(){b(this,i,c)})),s.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),l.append(s);const r=t("<div>",{class:`cla-hover-text bottom-text-${c}-${i}`,id:`${i}_${c}_div_bottom`,text:"..."});r.hover((function(){k(this,i,c,!0)}),(function(){k(this,i,c,!1)})),r.on("click",(function(t){C(this,i,c)})),l.append(r),a.append(l),e.append(a)}else{const n="not",i=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),l=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${n}-input`,id:`${n}_${c}_input`,name:`${n}${n}`,value:"Not Implemented",disabled:"disabled"});i.append(l),a.append(i),e.append(a)}})),this.getCompleteValue=function(){return r},this.getDigitAt=function(t){if("integer"===n.type||"float"===n.type){if(t>=0&&t<s.length){const e=s[t];return parseInt(e,10)}throw new Error("L'index est en dehors de la plage.")}throw new Error("Not implemented")},this.setCompleteValue=function(e,a=!1){if("integer"===n.type||"float"===n.type){const t=/^[-+]?\d+\.\d+$/.test(e),i=/^[-+]?\d+$/.test(e),l=isNaN(e);!t&&!i||l||(void 0!==n.totalMin&&null!=n.totalMin&&e<=n.totalMin&&(e=n.totalMin),void 0!==n.totalMax&&null!=n.totalMax&&e>=n.totalMax&&(e=n.totalMax),s.fill(0),"float"===n.type?V(e):"integer"===n.type&&S(e),r=x(s,"float"===n.type,n.decimalPosition),1==a&&"function"==typeof n.onValueChange&&n.onValueChange(null,r))}else{if("text"!==n.type)throw new Error("Not implemented");if(-1==d(n.values,e))throw new Error("Le texte n'est pas reconnu.");t("#list_"+c+"_input").val(e),r=e,1==a&&"function"==typeof n.onValueChange&&n.onValueChange(null,r)}},this}}(jQuery);