if("undefined"==typeof jQuery)throw new Error("La bibliothèque jQuery est requise pour que CodeInputBuilder fonctionne. Veuillez inclure jQuery avant de charger cette bibliothèque.");!function(t){t.fn.codeInputBuilder=function(e){const n=t.extend({type:"integer",numInputs:1,minValues:[],maxValues:[],values:[],defaultValue:0,allowSign:!1,defaultSign:"+",decimalPosition:1,separator:".",totalMax:null,totalMin:null,allowScroll:!0,scrollSensitivity:50,requireKeyForScroll:null,gap:"10px",onValueChange:null},e);let a=-1,i=0,l=9,o=n.allowSign?n.defaultSign:null,r=new Array(n.numInputs),s="",u=void 0!==n.totalMin&&null!=n.totalMin?m(n.totalMin):null,p=void 0!==n.totalMax&&null!=n.totalMax?m(n.totalMax):null,c=n.type+"_"+"xxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)}));function d(t,e){return t.indexOf(e)}function f(e,n){let a="+";return t("#"+e+"_"+n+"_input").length&&(a=t("#"+e+"_"+n+"_input").val()),`${a}`}function v(e,a,i,l,o=!0){let r;if("integer"===n.type){let e=function(e,n){let a="";return t("input[id^="+e+"_"+n+"_input]").each((function(){a+=t(this).val()})),`${a}`}("digit",l);if(r=parseInt(e,10),n.allowSign){r*="+"==f("sign",l)?1:-1}}else if("float"===n.type){let e=function(e,a){let i="",l=0;return t("input[id^="+e+"_"+a+"_input]").each((function(){l===n.decimalPosition&&(i+="."),i+=t(this).val(),l++})),`${i}`}("digit",l);if(r=parseFloat(e,10),n.allowSign){r*="+"==f("sign",l)?1:-1}}else"text"===n.type&&(r=a);s=r,"integer"!==n.type&&"float"!==n.type||(void 0!==n.totalMin&&null!=n.totalMin&&s<=n.totalMin&&(s=n.totalMin),void 0!==n.totalMax&&null!=n.totalMax&&s>=n.totalMax&&(s=n.totalMax),r!=s&&V(s,n.type)),1==o&&"function"==typeof n.onValueChange&&n.onValueChange(e,s)}function h(e,n,a,i,l,o){t(".cla-input-wrapper .top-text-"+e+"-"+n).css("visibility","hidden"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("visibility","hidden"),t(".cla-input-wrapper .top-text-"+e+"-"+n).css("opacity","0"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("opacity","0"),a&&(t(".cla-input-wrapper .top-text-"+e+"-"+n).css("visibility","visible"),t(".cla-input-wrapper .top-text-"+e+"-"+n).html(l),t(".cla-input-wrapper .top-text-"+e+"-"+n).css("opacity","1")),i&&(t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("visibility","visible"),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).html(o),t(".cla-input-wrapper .bottom-text-"+e+"-"+n).css("opacity","1"))}function m(t){const e=t.toString().replace(".","");let a=Array.from(e,(t=>parseInt(t,10)));for(;a.length<n.numInputs;)a.push(0);return a.slice(0,n.numInputs)}function x(t,e=!1,n=0){let a=t.map((t=>t.toString())).join("");return 1==e&&n<t.length&&(a=a.slice(0,n)+"."+a.slice(n)),parseFloat(a)}function _(e,i,l,o){let s=t(e).attr("id").replace(l+"_"+o+"_input_","");r[s-1]=i,e.value=i,v(t(e),i,0,o);let c=x(r,"float"===n.type,n.decimalPosition),d=parseInt(i)-1;void 0!==n.totalMax&&null!=n.totalMax&&c>=n.totalMax&&(d=parseInt(p[s-1])-1);let f=parseInt(i)+1;void 0!==n.totalMin&&null!=n.totalMin&&c<=n.totalMin&&(f=parseInt(u[s-1])+1);let m=parseInt(t(e).attr("data-min")),_=parseInt(t(e).attr("data-max"));if(void 0!==n.totalMin&&null!=n.totalMin&&c<=n.totalMin&&(m=Math.max(m,u[s-1])),void 0!==n.totalMax&&null!=n.totalMax&&c>=n.totalMax&&(_=Math.min(_,p[s-1])),s==a){h(o,s,d>=m,f<_+1,d,f)}}function g(e,n,a,i,l,o,r){const s=a.ctrlKey&&"paste"===a.key;let u=parseInt(t(e).attr("data-min")),p=parseInt(t(e).attr("data-max"));if(a.ctrlKey&&("c"===a.key||67===n)||a.ctrlKey&&("v"===a.key||86===n)||!a.ctrlKey&&17===n)a.preventDefault();else if(n>=48&&n<=48+p||n>=96&&n<=96+p&&!s||8===n||9===n||46===n){if(8===n)_(e,u,i,l),o-2==0&&(o=r+2),t("#"+i+"_"+l+"_input_"+(o-2)).focus();else if(46===n)_(e,u,i,l),o+1==r+2&&(o=1),t("#"+i+"_"+l+"_input_"+o).focus();else if(9!=n){var c=e.value.slice(-1);if(/^[0-9]$/.test(c)){let r=a.key;s&&(r=function(t){return String.fromCharCode(t)}(n)),_(e,r,i,l),t("#"+i+"_"+l+"_input_"+o).focus()}else _(e,e.value.slice(0,-1),i,l)}}else _(e,u,i,l),a.preventDefault()}function y(e,n,a,i){o=n,e.value=n,v(t(e),n,0,i),h(i,a,"-"==n,"+"==n,"+","-")}function M(t,e,n,a,i,l){const o=e.originalEvent||e;var r=o.keyCode||o.which;16!=r&&g(t,r,o,n,a,i,l)}function $(t,e,n,a){const i=e.originalEvent||e;var l=i.keyCode||i.which;16!=l&&function(t,e,n,a,i){"+"===n.key||"-"===n.key?y(t,n.key,a,i):9!=e&&(y(t,"+",a,i),n.preventDefault())}(t,l,i,n,a)}function w(e,a,i,l){if(!n.allowScroll)return;const o=e.originalEvent||e;if(o.preventDefault(),n.requireKeyForScroll){const t=n.requireKeyForScroll.toLowerCase();if("control"===t&&!e.ctrlKey||"shift"===t&&!e.shiftKey||"alt"===t&&!e.altKey||"meta"===t&&!e.metaKey)return}const r=void 0!==o.deltaY?o.deltaY:o.wheelDelta?-o.wheelDelta:0;if(!(Math.abs(r)<n.scrollSensitivity))if("digit"==i){let e=parseInt(a.value,10);e+=r<0?-1:1;let n=parseInt(t(a).attr("data-min")),o=parseInt(t(a).attr("data-max"));e<n&&(e=n),e>o&&(e=o),_(a,e,i,l)}else if("sign"==i){let t=0;"-"==a.value&&(t=0),"+"==a.value&&(t=1),t+=r<0?-1:1,t<0&&y(a,"+",i,l),t>1&&y(a,"-",i,l)}else if("list"==i){let e=d(n.values,a.value);if(-1!=e){e+=r<0?-1:1;let n=parseInt(t(a).attr("data-min")),i=parseInt(t(a).attr("data-max"));e<n&&(e=n),e>i&&(e=i)}!function(e,a,i,l){e.value=n.values[a],v(t(e),n.values[a],0,l);let o=parseInt(a)-1,r=parseInt(a)+1,s=parseInt(t(e).attr("data-min")),u=parseInt(t(e).attr("data-max")),p=o>=s,c=r<u+1;o<s&&(o=s),o>u&&(r=u),h(l,i,p,c,n.values[o],n.values[r])}(a,e,i,l)}}function I(e,i,l){if("digit"==i){let o=t(e).attr("id").replace(i+"_"+l+"_input_",""),r=parseInt(t(e).val())-1;void 0!==n.totalMax&&null!=n.totalMax&&s>=n.totalMax&&(r=parseInt(p[o-1])-1);let c=parseInt(t(e).val())+1;void 0!==n.totalMin&&null!=n.totalMin&&s<=n.totalMin&&(c=parseInt(u[o-1])+1);let d=parseInt(t(e).attr("data-min")),f=parseInt(t(e).attr("data-max"));void 0!==n.totalMin&&null!=n.totalMin&&s<=n.totalMin&&(d=Math.max(d,u[o-1])),void 0!==n.totalMax&&null!=n.totalMax&&s>=n.totalMax&&(f=Math.min(f,p[o-1])),a=o,h(l,o,r>=d,c<f+1,r,c)}else if("sign"==i){let n="-"==t(e).val(),o="+"==t(e).val();a=i,h(l,i,n,o,"+","-")}else if("list"==i){let o=d(n.values,e.value);if(-1!=o){a=i;let r=parseInt(o)-1,s=parseInt(o)+1,u=parseInt(t(e).attr("data-min")),p=parseInt(t(e).attr("data-max")),c=r>=u,d=s<p+1;r<u&&(r=u),r>p&&(s=p),h(l,i,c,d,n.values[r],n.values[s])}}}function b(e,n,i){if("digit"==n){h(i,t(e).attr("id").replace(n+"_"+i+"_input_",""),!1,!1,0,0)}else"sign"!=n&&"list"!=n||h(i,n,!1,!1,0,0);a=0}function V(e,a){if(isNaN(e))return;let o=e;"number"==typeof n.totalMin&&null!==n.totalMin&&o<n.totalMin&&(o=n.totalMin),"number"==typeof n.totalMax&&null!==n.totalMax&&o>n.totalMax&&(o=n.totalMax),n.allowSign&&t(`[id^="sign_${c}_input"]`).val(o<0?"-":"+");let s,u,p=Math.abs(o).toString();if("float"===a){[s,u]=p.split("."),s=s.padStart(n.decimalPosition,"0");const t=n.numInputs-n.decimalPosition;u=(u||"").slice(0,t).padEnd(t,"0")}else{if("integer"!==a)throw new Error("Type non supporté dans la fonction fillDigits.");s=p,u=""}const d=t(`[id^="digit_${c}_input_"]`).get();let f=d.length-1;d.forEach((e=>t(e).val(0)));for(let e of(s+u).split("").reverse()){const a=void 0!==n.minValues[f]?Math.max(i,Math.min(n.minValues[f],l)):i,o=void 0!==n.maxValues[f]?Math.max(i,Math.min(n.maxValues[f],l)):l;let s=Math.max(a,Math.min(e,o));t(d[f]).val(s),r[f]=s,f--}}function k(e,n,a,i){let l,o,r=t(e).attr("id").replace(n+"_"+a+"_div_","");"digit"==n?r.includes("top")?(l=r.replace("top_",""),o=`.cla-input-wrapper .top-text-${a}-${l}`):(l=r.replace("bottom_",""),o=`.cla-input-wrapper .bottom-text-${a}-${l}`):"sign"!=n&&"list"!=n||(o=`.cla-input-wrapper .${r}-text-${a}-${n}`),t(o).css("visibility",i?"visible":"hidden"),t(o).css("opacity",i?"1":"0")}function S(e,i,l){let o,r,s,u,p,c,f,m,x=t(e).attr("id").replace(i+"_"+l+"_div_","");if("digit"==i)x.includes("top")?(o=x.replace("top_",""),r=parseInt(t(e).html()),t("#"+i+"_"+l+"_input_"+o).val(r),v(t("#"+i+"_"+l+"_input_"+o),r,0,l),a=o,s=parseInt(t("#"+i+"_"+l+"_input_"+o).attr("data-min")),f=r-1,p=f>=s,h(l,o,p,!1,f,0),a=0):(o=x.replace("bottom_",""),r=parseInt(t(e).html()),t("#"+i+"_"+l+"_input_"+o).val(r),v(t("#"+i+"_"+l+"_input_"+o),r,0,l),a=o,u=parseInt(t("#"+i+"_"+l+"_input_"+o).attr("data-max")),m=r+1,c=m<u+1,h(l,o,!1,c,0,m),a=0);else if("sign"==i)t("#"+i+"_"+l+"_input").val(t(e).html()),v(t("#"+i+"_"+l+"_input"),t(e).html(),0,l),a=i,h(l,i,!1,!1,0,0),a=0;else if("list"==i){t("#"+i+"_"+l+"_input").val(t(e).html()),v(t("#"+i+"_"+l+"_input"),t(e).html(),0,l),a=i;let o=d(n.values,t(e).html());x.includes("top")?(s=parseInt(t("#"+i+"_"+l+"_input").attr("data-min")),f=o-1,p=f>=s,f<s&&(f=s),h(l,i,p,!1,n.values[f],"...")):(u=parseInt(t("#"+i+"_"+l+"_input").attr("data-max")),m=o+1,c=m<u+1,f>m&&(m=u),h(l,i,!1,c,"...",n.values[m])),a=0}}function C(e,a,i,l,o){const r=a.originalEvent||a;r.preventDefault();let s=r.clipboardData.getData("text");s.length>1&&(s=s.substring(0,1));let u=s.charCodeAt(0);r.ctrlKey=!0,r.key="paste",g(e,u,r,l,i,t(e).attr("id").replace(o+"_",""),n.numInputs)}return this.each((function(){const e=t(this),a=t("<div>",{class:"cla-input-container",css:{display:"flex","justify-content":"center","align-items":"center",gap:n.gap}});if("integer"===n.type||"float"===n.type){if(n.allowSign){const e="sign",n=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),i=t("<div>",{class:`cla-hover-text top-text-${c}-${e}`,id:`${e}_${c}_div_top`,text:"0"});i.hover((function(){k(this,e,c,!0)}),(function(){k(this,e,c,!1)})),i.on("click",(function(t){S(this,e,c)})),n.append(i);const l=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${e}-input`,maxLength:"1",id:`${e}_${c}_input`,name:`${e}${e}`,autocomplete:"off",value:o});l.on("keyup",(function(t){$(t.currentTarget,t,e,c)})),l.on("wheel",(function(t){w(t,t.currentTarget,e,c)})),l.hover((function(){I(this,e,c)}),(function(){b(this,e,c)})),l.on("paste",(function(t){C(this,t,c,e,`${e}_${c}_input`)})),l.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),n.append(l);const r=t("<div>",{class:`cla-hover-text bottom-text-${c}-${e}`,id:`${e}_${c}_div_bottom`,text:"0"});r.hover((function(){k(this,e,c,!0)}),(function(){k(this,e,c,!1)})),r.on("click",(function(t){S(this,e,c)})),n.append(r),a.append(n)}for(let e=1;e<=n.numInputs;e++){if("float"===n.type&&e-1===n.decimalPosition){const e=t("<div>",{class:"col-1",html:'<div><h2 class="my-5">'+n.separator+"</h2></div>"});a.append(e)}const o="digit",s=void 0!==n.minValues[e-1]?Math.max(i,Math.min(n.minValues[e-1],l)):i,u=void 0!==n.maxValues[e-1]?Math.max(i,Math.min(n.maxValues[e-1],l)):l;let p=void 0!==n.values[e-1]?n.values[e-1]:n.defaultValue;p=Math.max(s,Math.min(p,u));const d=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),f=t("<div>",{class:`cla-hover-text top-text-${c}-${e}`,id:`${o}_${c}_div_top_${e}`,text:s});f.hover((function(){k(this,o,c,!0)}),(function(){k(this,o,c,!1)})),f.on("click",(function(t){S(this,o,c)})),d.append(f);const v=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${o}-input`,maxLength:"1",id:`${o}_${c}_input_${e}`,name:`${o}${e}`,autocomplete:"off",value:p,"data-min":s,"data-max":u});v.on("keyup",(function(t){M(t.currentTarget,t,o,c,e+1,n.numInputs)})),v.on("wheel",(function(t){w(t,t.currentTarget,o,c)})),v.hover((function(){I(this,o,c)}),(function(){b(this,o,c)})),v.on("paste",(function(t){C(this,t,c,o,`${o}_${c}_input`)})),v.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),d.append(v);const h=t("<div>",{class:`cla-hover-text bottom-text-${c}-${e}`,id:`${o}_${c}_div_bottom_${e}`,text:s});h.hover((function(){k(this,o,c,!0)}),(function(){k(this,o,c,!1)})),h.on("click",(function(t){S(this,o,c)})),d.append(h),a.append(d),r[e-1]=p}e.append(a);for(let e=1;e<=n.numInputs;e++){const a="digit",o=void 0!==n.minValues[e-1]?Math.max(i,Math.min(n.minValues[e-1],l)):i,r=void 0!==n.maxValues[e-1]?Math.max(i,Math.min(n.maxValues[e-1],l)):l;let s=void 0!==n.values[e-1]?n.values[e-1]:n.defaultValue;s=Math.max(o,Math.min(s,r)),v(t("#"+a+"_"+c+"_input_"+e),s,0,c,!1)}}else if("text"===n.type){const i="list";if(!Array.isArray(n.values)||0===n.values.length)throw new Error("settings.values doit être un tableau contenant au moins une valeur.");if("number"!=typeof n.defaultValue||!Number.isInteger(n.defaultValue))throw new Error("settings.defaultValue doit être un entier.");if(n.defaultValue<0||n.defaultValue>=n.values.length)throw new Error(`settings.defaultValue doit être compris entre 0 et ${n.values.length-1}.`);const l=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),o=t("<div>",{class:`cla-hover-text top-text-${c}-${i}`,id:`${i}_${c}_div_top`,text:"..."});o.hover((function(){k(this,i,c,!0)}),(function(){k(this,i,c,!1)})),o.on("click",(function(t){S(this,i,c)})),l.append(o);const r=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${i}-input`,id:`${i}_${c}_input`,name:`${i}`,autocomplete:"off",value:n.values[n.defaultValue],disabled:"disabled","data-min":0,"data-max":n.values.length-1});r.on("wheel",(function(t){w(t,t.currentTarget,i,c)})),r.hover((function(){I(this,i,c)}),(function(){b(this,i,c)})),r.on("copy",(function(e){e.preventDefault(),navigator.clipboard.writeText(t(this).val())})),l.append(r);const u=t("<div>",{class:`cla-hover-text bottom-text-${c}-${i}`,id:`${i}_${c}_div_bottom`,text:"..."});u.hover((function(){k(this,i,c,!0)}),(function(){k(this,i,c,!1)})),u.on("click",(function(t){S(this,i,c)})),l.append(u),a.append(l),e.append(a),s=n.values[n.defaultValue]}else{const n="not",i=t("<div>",{class:"text-center cla-input-wrapper",css:{position:"relative"}}),l=t("<input>",{type:"text",class:`form-control form-control-lg text-center cla-h2-like ${n}-input`,id:`${n}_${c}_input`,name:`${n}${n}`,value:"Not Available",disabled:"disabled"});i.append(l),a.append(i),e.append(a)}})),this.getCompleteValue=function(){return s},this.getDigitAt=function(t){if("integer"===n.type||"float"===n.type){if(t>=0&&t<r.length){const e=r[t];return parseInt(e,10)}throw new Error("L'index est en dehors de la plage")}throw new Error("settings.type non disponible avec la fonction getDigitAt")},this.setCompleteValue=function(e,a=!1){if("integer"===n.type||"float"===n.type){if(!/^[-+]?\d+(\.\d+)?$/.test(e))throw new Error("La valeur doit être un nombre flottant ou un entier.");if(r.fill(0),V(e,n.type),s=x(r,"float"===n.type,n.decimalPosition),n.allowSign){let t=f("sign",c);s*="+"==t?1:-1}a&&"function"==typeof n.onValueChange&&n.onValueChange(null,s)}else{if("text"!==n.type)throw new Error("Le type spécifié dans settings n'est pas compatible avec setCompleteValue.");if(-1===d(n.values,e))throw new Error("Le texte n'est pas reconnu dans les valeurs disponibles.");t("#list_"+c+"_input").val(e),s=e,a&&"function"==typeof n.onValueChange&&n.onValueChange(null,s)}},this},t.fn.codeInputBuilder.version="0.0.4",t.fn.codeInputBuilder.title="CodeInputBuilder",t.fn.codeInputBuilder.description="Un plugin jQuery pour créer des champs d'input configurables pour des valeurs numériques ou flottantes et pour les textes."}(jQuery);